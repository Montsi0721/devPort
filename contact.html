<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Me</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="assets/logo.png">
    <link rel="stylesheet" href="styles/general.css">
    <link rel="stylesheet" href="styles/contact.css">
    <style>
        .error-message {
            color: #dc3545;
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-size: 14px;
            display: none;
        }
        
        .success-message {
            color: #155724;
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-size: 14px;
            display: none;
        }
        
        .form-group input.error,
        .form-group textarea.error {
            border-color: #dc3545;
        }
        
        .required {
            color: #dc3545;
        }
    </style>
</head>

<body>
    <div class="content">
        <h1>Get In Touch</h1>

        <!-- Success Message (hidden by default) -->
        <div id="successMessage" class="success-message">
            Thank you for your message! I'll get back to you soon.
        </div>

        <!-- Error Message (hidden by default) -->
        <div id="errorMessage" class="error-message">
            There was an error sending your message. Please try again or email me directly at montsikhotso@gmail.com
        </div>

        <div class="contact-container">
            <div class="contact-info">
                <h2>Contact Information</h2>
                <p>Feel free to reach out to me for any inquiries or collaboration opportunities.</p>

                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="contact-details">
                        <h3>Location</h3>
                        <p>Maseru, Lesotho</p>
                    </div>
                </div>

                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div class="contact-details">
                        <h3>Email</h3>
                        <p>montsikhotso@gmail.com</p>
                    </div>
                </div>

                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <div class="contact-details">
                        <h3>Phone</h3>
                        <p>+266 5793 2975</p>
                    </div>
                </div>

                <div class="social-links">
                    <a href="https://github.com/Montsi0721" class="social-link" target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                    <a href="#" class="social-link">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    <a href="#" class="social-link">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="social-link">
                        <i class="fab fa-instagram"></i>
                    </a>
                </div>
            </div>

            <div class="contact-form">
                <h2>Send Me a Message</h2>
                <form id="contactForm" action="https://formspree.io/f/xnnekzra" method="POST">
                    <div class="form-group">
                        <label for="name">Your Name <span class="required">*</span></label>
                        <input type="text" id="name" name="name" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Your Email <span class="required">*</span></label>
                        <input type="email" id="email" name="email" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="subject">Subject <span class="required">*</span></label>
                        <input type="text" id="subject" name="subject" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="message">Your Message <span class="required">*</span></label>
                        <textarea id="message" name="message" class="form-control" rows="5" required></textarea>
                    </div>

                    <!-- Honeypot field for spam protection -->
                    <input type="text" name="_gotcha" style="display:none">
                    
                    <!-- Add a hidden field to customize the email subject -->
                    <input type="hidden" name="_subject" value="New Contact Form Submission">
                    
                    <!-- Add a reply-to field -->
                    <input type="hidden" name="_replyto" value="%email%">

                    <button type="submit" class="submit-btn">
                        <i class="fas fa-paper-plane"></i> Send Message
                    </button>
                </form>
            </div>
        </div>
        
        <div class="map-container">
            <div class="map-placeholder">
                <i class="fas fa-map-marked-alt"></i>
                <p>Maseru, Lesotho</p>
            </div>
        </div>
    </div>
    
    <script src="javascript/footer.js"></script>
    <script>
        // Client-side validation and form handling
        document.getElementById('contactForm').addEventListener('submit', function(event) {
            // Clear previous messages
            document.getElementById('successMessage').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'none';
            
            let isValid = true;
            const inputs = this.querySelectorAll('input[required], textarea[required]');
            
            // Remove error classes
            inputs.forEach(input => {
                input.classList.remove('error');
            });
            
            // Validate required fields
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    isValid = false;
                    input.classList.add('error');
                }
            });
            
            // Email validation
            const emailInput = document.getElementById('email');
            if (emailInput.value) {
                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailPattern.test(emailInput.value)) {
                    isValid = false;
                    emailInput.classList.add('error');
                    showError('Please enter a valid email address');
                }
            }
            
            // Name validation (minimum 2 characters)
            const nameInput = document.getElementById('name');
            if (nameInput.value && nameInput.value.trim().length < 2) {
                isValid = false;
                nameInput.classList.add('error');
                showError('Name must be at least 2 characters');
            }
            
            // Message validation (minimum 10 characters)
            const messageInput = document.getElementById('message');
            if (messageInput.value && messageInput.value.trim().length < 10) {
                isValid = false;
                messageInput.classList.add('error');
                showError('Message must be at least 10 characters');
            }
            
            if (!isValid) {
                event.preventDefault();
                return false;
            }
            
            // If validation passes, show loading state
            const submitBtn = this.querySelector('.submit-btn');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
            submitBtn.disabled = true;
            
            // Submit via AJAX for better UX
            event.preventDefault();
            
            const formData = new FormData(this);
            
            fetch(this.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => {
                if (response.ok) {
                    document.getElementById('successMessage').style.display = 'block';
                    this.reset();
                    document.getElementById('successMessage').scrollIntoView({ behavior: 'smooth' });
                } else {
                    throw new Error('Form submission failed');
                }
            })
            .catch(error => {
                // Show error message
                document.getElementById('errorMessage').style.display = 'block';
                document.getElementById('errorMessage').scrollIntoView({ behavior: 'smooth' });
                
                // Fallback: try regular form submission
                console.log('AJAX failed, trying regular submission...');
                this.submit();
            })
            .finally(() => {
                // Reset button state
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            });
            
            return false;
        });
        
        function showError(message) {
            alert(message);
        }
        
        // Clear message textarea after 3 seconds if it contains default text
        window.addEventListener('load', function() {
            const messageTextarea = document.getElementById('message');
            if (messageTextarea.value.includes('Something went wrong!')) {
                setTimeout(() => {
                    messageTextarea.value = '';
                }, 3000);
            }
        });
    </script>
</body>
</html>